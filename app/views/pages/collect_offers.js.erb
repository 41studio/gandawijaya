var title       =   '.modal-title',
    loader      =   '.ajax-loader',
    content     =   '.modal-body-content',
    offerId     =    '<%= @offers.try(:last).try(:offer_room).try(:id) %>',
    offerRow    =   '#offer-row-'+ offerId,
    offerA      =   '#offer-a-'+ offerId,
    modal       =   '#ajax-modal';

$(title).html('<%= @product.name %>');
$(offerRow).removeClass('unread');
$(offerA).removeClass('unread');
$(loader).fadeToggle('fast', function() {
  $(loader).fadeOut('slow');
  $(content).html("<%= j render partial: 'pages/offer', collection: @offers, as: :offer %>");
  $(content)[0].scrollTop = $(content)[0].scrollHeight;
  $('#offer_shop_id').val("<%= @product.shop.id %>");
  $('#offer_product_id').val("<%= @product.id %>");
  $('#offer_user_id').val("<%= params[:user_id]%>")
  $(modal).modal();
});
$(content).on('click', dataRemote, function(){
  $(content).fadeOut('slow', function() {
    $(content).empty();
    $(loader).fadeIn('slow');
  });
});